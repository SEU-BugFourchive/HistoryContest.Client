<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>校史校情知识竞赛系统--登录</title>
  <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/login.css">
  <!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
  <script src="assets/js/jquery-3.2.1.min.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>
  <script src="assets/js/validator.min.js"></script>
  <script src="assets/js/jquery.backstretch.min.js"></script>
  <script src="assets/js/login.js"></script>
  <script>
    function foreach()  
{  
  var strCookie=document.cookie;  
  var arrCookie=strCookie.split("; ");  
  for(var i=0;i<arrCookie.length;i++)  
 {  
    var arr=arrCookie[i].split("=");  
    if(arr.length>0)  
    DelCookie(arr[0]);  
 }  
}  
function GetCookieVal(offset)  
{  
var endstr = document.cookie.indexOf (";", offset);  
if (endstr == -1)  
endstr = document.cookie.length;  
return decodeURIComponent(document.cookie.substring(offset, endstr));  
}  
function DelCookie(name)  
{  
  var exp = new Date();  
  exp.setTime (exp.getTime() - 1);  
  var cval = GetCookie (name);  
  document.cookie = name + "=" + cval + "; expires="+ exp.toGMTString();  
}  
  function GetCookie(name)  
{  
  var arg = name + "=";  
  var alen = arg.length;  
  var clen = document.cookie.length;  
  var i = 0;  
  while (i < clen)  {  
    var j = i + alen;  
    if (document.cookie.substring(i, j) == arg)  
      return GetCookieVal (j);  
    i = document.cookie.indexOf(" ", i) + 1;  
    if (i == 0) break;  
  }  
  return null;  
}  
function clearCookie(){  
  console.log("Clearing...")
    var date=new Date();  
    date.setTime(date.getTime()-10000);  
    var keys=document.cookie.match(/[^ =;]+(?=\=)/g);  
    if (keys) {  
        for (var i =  keys.length; i--;)  
          document.cookie=keys[i]+"=0; expire="+date.toGMTString()+"; path=/";  
    }  
    console.log("Completed...");
    console.log(document.cookie);
}  
  $(function(){
   

    if (window.$ && window.$.ajaxSetup) {
    $.ajaxSetup({
         beforeSend: function (xhr) {
         var match = window.document.cookie.match(/(?:^|\s|;)XSRF-TOKEN\s*=\s*([^;]+)(?:;|$)/);
         xhr.setRequestHeader("X-XSRF-TOKEN", match && match[1]);
         }
         });
        }
  })
  $(window).load(function() {
    clearCookie();
  });
  
 
</script>
</head>

<body>

  <div class="loginHTML-container">
    <div class="header">
      <img src="images/logo.png" alt="东大校徽">
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <form class="form-horizontal" data-toggle="validator" id="login-form">
            <span class="heading">校史校情知识竞赛</span>
            <div class="form-group">
              <input type="text" class="form-control" id="username"
                  pattern="^[0-9]{8}$" 
                  required autofocus autocomplete="off"
                  placeholder="账号为学号" 
                  name="userName" 
                  title="账号为学号"
                  data-toggle="validator" 
                  data-error="账号为八位学号！">
              <span class="glyphicon glyphicon-user"></span>
              <div class="help-block with-errors"></div>
            </div>

            <div class="form-group">
              <input type="password" class="form-control" id="password"
                  pattern="^[0-9A-Z]{9}$" 
                  required autocomplete="off"
                  placeholder="密码为一卡通号" 
                  data-toggle="validator" 
                  name="password"
                  title="密码为一卡通号"  
                  data-error="密码为九位一卡通号！" >
              <span class="glyphicon glyphicon-lock"></span>
              <div class="help-block with-errors"></div>
            </div>
            <div class="form-group">
              <div id="common-error" style="display:none;color:red"></div>
              <a href="#" data-toggle="modal" data-target="#register">还未注册？</a>
              <button type="submit" class="btn btn-default" id="submit">登录</button>
            </div>
          </form>
        </div>
      </div>
      <div class="modal fade" id="register" tabindex="-1" role="dialog" aria-labelledby="register-modal">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title" id="register-modal">注册</h4>
            </div>
            <div class="modal-body">
              <form class="form-horizontal" data-toggle="validator" id="register-form">
                
                <div class="form-group">
                  <input type="text" class="form-control" id="register-realname"
                      required  autofocus autocomplete="off"
                      placeholder="请输入您的姓名" 
                      name="realName"
                      title="请输入姓名"
                      data-toggle="validator" 
                      data-error="请输入姓名！">
                  <span class="glyphicon glyphicon-pencil"></span>
                  <div class="help-block with-errors"></div>
                </div>
    
                <div class="form-group">
                  <input type="text" class="form-control" id="register-username"
                      pattern="^[0-9A-Z]{8}$" 
                      required autocomplete="off"
                      placeholder="请输入您的学号" 
                      name="userName" 
                      title="请输入您的学号"
                      data-toggle="validator" 
                      data-error="账号为八位学号！">
                  <span class="glyphicon glyphicon-user"></span>
                  <div class="help-block with-errors"></div>
                </div>
    
                <div class="form-group">
                  <input type="password" class="form-control" id="register-password"
                      pattern="^[0-9]{9}$" 
                      required autocomplete="off"
                      placeholder="请输入您的一卡通号" 
                      data-toggle="validator" 
                      name="password"
                      title="请输入您的一卡通号"  
                      data-error="密码为九位一卡通号！" >
                  <span class="glyphicon glyphicon-lock"></span>
                  <div class="help-block with-errors"></div>
                </div>
                
                <div class="form-group">
                  <button type="submit" class="btn btn-default" id="submit-register">注册</button>
                </div>
                <div class="modal-footer">
                  <span id="register-message"></span>
              </div>
              </form>
            </div>
           
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>